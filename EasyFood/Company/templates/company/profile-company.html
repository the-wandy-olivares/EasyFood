{% extends "food/base/base.html" %}
{% block content %}
{% load humanize %}
      <style>
            .detail-profile p
            {
                  margin: 0;
            }
            .my-profile {
                  background-color: var(--bg-primary) !important;
                  color:  #857f94 !important;
                  transform: scale(1.1);
            }
            .my-profile svg   {
                  display: none;
            }
            .options-list-employe span {
                  width: 60px; height: 60px;
                  border-radius: 50%;
                  text-align: center;
                  background-color: #343434;
                  display: flex; justify-content: center; align-content: center; 
                  flex-wrap:  wrap;
                  font-size: 10px; font-weight: bold;
                  margin: 0.2rem;
                  cursor: pointer;
            }
            .options-list-employe span svg {
                  width: 30px; height: 30px;
              
            }
      </style>
                  <a href="{% url "company:admin-company" %}"  class='esc d-none btn position-absolute  end-0 border-0  rounded-5 top-0 mt-5   p-2 pe-4 ps-4' style=" 
                      margin-right: 14rem;" >
                              <span style='font-weight:bold;' class='text-white' > Atras </span>
                  </a>
            
            <section class="d-flex w">
                  <div data-aos='fade-in' class=' d-flex justify-content-center flex-wrap position-relative' style='width: 10rem; transition-delay: 0.2s  ;'>
                        <div style='width: 120px; height: 120px; background-color: var(--bg-primary); 
                        border-radius: 50%; border: 4px solid #7e7e7e; cursor: pointer; '
                              class="d-flex flex-wrap align-content-center img-load  mt-2 justify-content-center mb-1" >
                              {% if company.img %}
                                    <img src="{{company.img.url}}" class='w-100 h-100 object-fit-cover rounded-circle' alt="">
                              {% endif %}
                        </div>
                        {% if request.user.employee_profile.role == 'representante' %}
                        <!--Editar empresa-->
                        <a href="{% url "company:update-company"  company.id %}" class='btn d-flex position-absolute z-3 text-white-50 start-0 top-0 mb-1 me-3 bg-transparent border-0'
                              style='font-weight: bold; margin-top: 0rem; margin-left: 6.5rem; font-size: 14px;'>
                              Editar
                        </a> 
                        {% endif %}
                  </div>

                  <!--Lista de Empleados-->
                  <section class=" detail-profile w-100 m-1 position-relative ms-4 rounded-5 p-3" 
                        style="background-color: var(--bg-prim);">

                        <!-- Información General -->
                        <h3 class="m-0 p-0 mt-2 pt-1" style='font-weight: bold;'>{{ company.name }}</h3>
                        <p class='text-white-50'>RNC: {{ company.tax_id }}</p>
                        <p class='text-white-50'>Dirección: {{ company.address }}</p>
                        <p class='text-white-50'>Teléfono: {{ company.phone }}</p>

                        <div class='position-absolute bottom-0 p-2 w-100 d-flex justify-content-end start-0'>
                        </div>
                  </section>


            </section>
            {% if request.user.employee_profile.role == 'representante' %}
            <section class='w-100  rounded-5 p-3 mt-3 position-relative' 
                  '>
                  {% if employee %}
                  <strong class='mt-4'>
                        <span class='text-white-50'>({{count}})  Empleados </span>   
                  </strong>
                  <p class="text-white-50">
                        Gestiona los empleados de manera eficiente, activa, descativa, cambia roles y mas
                  </p>
                  <div style="width: 100%; height: 13rem; background-color: var(--bg-secdundary);" class="   rounded-4   overflow-auto mb-1 position-relative"  >
                        {% include "company/employee/list-employee.html" %}
                  </div>
                  {% endif %}

                  {% if contrato %}
                        <strong class='mt-5'>
                              <span class='text-white-50'> Servicios contratados <span> 
                        </strong>
                        <p class="text-white-50">
                              Servicios contratados  
                        </p>
                        <div class='mt-3 overflow-auto w-100 d-flex' style=' height: 20rem;'>
                              {% for s in  contrato.service_type.all  %}
                               <div data-aos="fade-left"  class="card mb-3 w-100 bg-transparent m-2 border-0  " style="max-width: 420px; max-height: 230px; transition-delay: 0.{{s.id}}s;">
                                      <div class=" d-flex  w-100 h-100 " >
                                          {% if s.img %}
                                          <img src="{{s.img.url}}" class="object-fit-cover  w-100" style="border-radius: 2.9rem;" alt="{{s.name}}">
                                          {% endif %}
                                    </div>
                                    <strong class="card-title text-white  text-capitalize"
                                          style="font-weight: bold;" >   {{s.name}}</strong>
                                    <p class="card-text   overflow-auto text-white-50" style="height: 3.5rem;"> 
                                          {{s.description|truncatechars:25}}...
                                    </p>
                              </div>
                              {% endfor %}
                        </div>
      
                        {% else %}
                        <div class='mt-5 w-100 text-center  d-flex justify-content-center '>
                              <div style="width: 40rem; " class="bg-white bg-opacity-10 p-4 rounded-5">
                                    <strong class='text-white-50 text-center ' > No hay servicios contratados <strong> 
                                    <p  style='font-weight: 400;' class='text-white-50'>
                                          Debe haber un contrato vigente para poder administrar los menus 
                                    </p>
                              </div>
                        </div>
                  {% endif %}
            </section>
            {% else %}

            {% endif %}
<section>



</section>


<div class="dropdown  position-absolute top-0 end-0  mt-5 me-5">
      <button class="btn bg-warning text-black rounded-5 dropdown-toggle"
      style="font-weight: bold;" type="button" data-bs-toggle="dropdown" aria-expanded="false">
            Opciones
      </button>
      <ul class="dropdown-menu " style="background-color: var(--bg-primary); ">
            {% if request.user.employee_profile.role == 'representante' %}
                  <li class="bg-transparent">
                        <a  onclick="LoadMasiveImport()"  class="dropdown-item" >
                              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cloud-arrow-up-fill" viewBox="0 0 16 16">
                                    <path d="M8 2a5.53 5.53 0 0 0-3.594 1.342c-.766.66-1.321 1.52-1.464 2.383C1.266 6.095 0 7.555 0 9.318 0 11.366 1.708 13 3.781 13h8.906C14.502 13 16 11.57 16 9.773c0-1.636-1.242-2.969-2.834-3.194C12.923 3.999 10.69 2 8 2m2.354 5.146a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0V6.707L6.354 7.854a.5.5 0 1 1-.708-.708l2-2a.5.5 0 0 1 .708 0z"/>
                              </svg>
                              Carga de empleados masiva
                        </a>
                  </li>
                  <li>
                        <a class="dropdown-item"   
                        href="{% url "company:create-employee"  company.id %}">
                              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-plus-fill" viewBox="0 0 16 16">
                                    <path d="M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6"/>
                                    <path fill-rule="evenodd" d="M13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5"/>
                              </svg>
                              Agregar empleado
                        </a>
                  </li>
                  <li class="bg-transparent">
                        <a    href="{% url "company:logout"  %}" class="dropdown-item" >
                              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-emoji-neutral-fill" viewBox="0 0 16 16">
                                    <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16M7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5m-3 4a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5M10 8c-.552 0-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5S10.552 8 10 8"/>
                                  </svg>
                              Cerrar session
                        </a>
                  </li>
            {% endif %}
            {% if request.user.restaurant %}
            <li>
                  <a class="dropdown-item"   
                  href="{% url "company:contratos-company" company.id %}">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark-text-fill" viewBox="0 0 16 16">
                        <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0M9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1M4.5 9a.5.5 0 0 1 0-1h7a.5.5 0 0 1 0 1zM4 10.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5m.5 2.5a.5.5 0 0 1 0-1h4a.5.5 0 0 1 0 1z"/>
                        </svg>
                        Contratos
                  </a>
            </li>
            {% endif %}
      </ul>
</div>
<div>



<section class="w-100 rounded-5 p-3 mt-5 position-relative text-start" style="background-color: var(--bg-prim);">
      <strong class="text-white-50 ">Datos de facturación</strong>
      <table class="w-100">
            <thead>
                  <tr>
                        <th scope="col"> Facturado</th>
                        <th scope="col"> Enviado</th>
                        <th scope="col"> Pendiente</th>
                  </tr>
            </thead>
            <tbody>
                  <tr>
                        <td> ${{ total|intcomma }}.00</td>
                        <td> ${{ total_entregado|intcomma }}.00</td>
                        <td> ${{ total_pendiente|intcomma }}.00</td>
                  </tr>
            </tbody>
      </table>
</section>

{% if request.user.restaurant %}
      <section class="p-3">
            <h4 class="text-white-50">
                  Estado de empresa
            </h4>
            {% if company.is_active %}
                  Desactivar empresa
            {% else %}
                        <span class="badge bg-primary rounded-5 bg-transparent">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-check2-all text-primary" viewBox="0 0 16 16"><path d="M12.354 4.354a.5.5 0 0 0-.708-.708L5 10.293 1.854 7.146a.5.5 0 1 0-.708.708l3.5 3.5a.5.5 0 0 0 .708 0zm-4.208 7-.896-.897.707-.707.543.543 6.646-6.647a.5.5 0 0 1 .708.708l-7 7a.5.5 0 0 1-.708 0"/>
                        <path d="m5.354 7.146.896.897-.707.707-.897-.896a.5.5 0 1 1 .708-.708"/>
                        </svg>    Activar
            {% endif %}
      </section>
{% endif %}

</div>
<style>
      .dropdown-menu {
            border-radius: 1rem;
            margin-top: 1rem !important; 
      }
      .dropdown-menu  li a 
      {
            cursor: pointer;
            color: white; font-weight: bold;
            transition: 0.3s  ease-out !important ;

      }
      .dropdown-menu  li a:hover
      {
            background-color: var(--bg-primary) !important;
            color: rgb(255, 208, 0);
      }
</style>
    

<script>


function ChangeStatus(){
      document.querySelector('.options-content').classList.toggle('d-none');

}

</script>

{% endblock  %}