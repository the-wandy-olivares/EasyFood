<!doctype html>
<html lang="es">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <title>Easy Food </title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    </head>
    <style>
        *{
                padding: 0px;
                margin: 0px;
                box-sizing: border-box;
                /* color: white; */
                font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }
        
            /* Styling the scrollbar */
        ::-webkit-scrollbar {
            width: 0px; /* Remove scrollbar width */
        }   
        :root {
            /* Colores de fondo */
            --bg-primary: #131313;
            --bg-secundary: #1f1e22;

            /* Colores de acento */
            --accent-blue: #A2C2E1;
            --accent-green: #8BC34A;

            /* Colores de texto */
            --text-dark-gray: #333333;
            --text-secondary-gray: #B0B0B0;
        }
        body {
                background-color: var(--bg-primary);
                color: white;
        }
        p
        {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.831);
        }
        h1, h2, h3, h4, h5, h6  {
            color: rgba(255, 255, 255, 0.831);;
        }
        .blur-5 {
                  -webkit-backdrop-filter: blur(5px) !important;
                  backdrop-filter: blur(5px) !important;
            }
        .blur-10 {
                  -webkit-backdrop-filter: blur(10px) !important;
                  backdrop-filter: blur(10px) !important;
            }
            .blur-20 {
                  -webkit-backdrop-filter: blur(80px) !important;
                  backdrop-filter: blur(80px) !important;
            }

@keyframes flip-up-ai {
    0% {
        transform: rotateX(90deg);
        opacity: 0;
    }
    100% {
        transform: rotateX(0deg);
        opacity: 1;
    }
}

.flip-up-ai {
    animation: flip-up-ai 0.5s ease-out ;
    transform-origin: bottom; /* Punto de rotación */
}
@keyframes flip-down-ai {
    0% {
        transform: rotateX(90deg);
        opacity: 0;
    }
    100% {
        transform: rotateX(0deg);
        opacity: 1;
    }
}

.flip-down-ai {
    animation: flip-down-ai 0.5s ease-in ;
    transform-origin: top; /* Punto de rotación */
}


td{
    color: #ffffffbe;
}

    </style>
            <section class="position-absolute  z-3 sec-top blur-20 top-0 start-0 w-100 vh-100 d-flex justify-content-center flex-wrap align-content-center">

                <div class="p-3">
                    <svg xmlns="http://www.w3.org/2000/svg" onclick="LoadMasiveImport()" width="25" height="25" fill="currentColor" class="bi bi-x-circle-fill me-1 position-absolute" viewBox="0 0 16 16" style="cursor: pointer;">
                        <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293z"/>
                      </svg>
                    <div id="download-template" class="p-5 bg-black shadow bg-opacity-25 " 
                    style=" width: 890px; height: 530px; border-radius: 3rem;">
                        <h5 class="m-0 p-0">
                            Carga masiva de usuarios
                        </h5>
                        <p class="p-0 m-0 ">Para realizar la carga masiva de usuarios, debes descargar la plantilla > una vez agrega los usuario > luego cargar el nuevo archivo con sus datos<br>
                          <a href="" class="btn mt-3 p-2 pe-4 ps-4 btn-warning rounded-5" download style="font-weight: bold; font-size: 16px;" >Descargar plantilla</a>
                        </p>

                            <div class="w-100 mt-3 pt-4">
                                <!-- <form id="upload-form" class="w-100" action="" method="post" enctype="multipart/form-data"> -->
                                    <!-- {% csrf_token %} -->
                                    <div class="mb-3 w-100">
                                        <label for="file" class="form-label w-100" style="cursor: pointer;">
                                            <div style="height: 270px; border-radius: 3rem; background-color: var(--bg-secundarys); border: 4px rgba(38, 38, 38, 0.222)  solid;" class="w-100  d-flex  bg-black bg-opacity-25 justify-content-center align-content-center flex-wrap   ">
                                                <strong>
                                                    Carga tu archivo aquí <span class="text-white-50">( usuario.XLSX )</span>
                                                </strong>
                                            </div>
                                        </label>
                                        {% csrf_token %}
                                        <input type="file" class="form-control d-none" id="file" name="file" required onchange="Load_Masive_Excel_Users()">
                                    </div>
             
                                <!-- </form> -->
                 
                            </div>
                      </div>
                </div>

            </section>
    <body class="" >


        <main class='  p-4 d-flex w-100 vh-100'>
                <div style="width: 13%;" class="m-1 me-3" >
                        {% include "food/componentes/nav.html" %} 
                </div>
                <section data-aos="zoom-out"  class=' p-4  h-100  overflow-scroll'  style=" background-color: var(--bg-secundary); border-radius: 2.5rem !important; transition: 0.9s !important;
                width: 86%; ">
                    {% block content %}
                    {% endblock  %}
                </section>
        </main>

        
        <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script>
                AOS.init();
        </script>
        <script>
            document.getElementById('id_phone').addEventListener('input', function(e) {
                let input = e.target;
                let value = input.value.replace(/\D/g, ''); // Elimina todos los caracteres no numéricos
        
                if (value.length <= 3) {
                    value = `(${value}`;
                } else if (value.length <= 6) {
                    value = `(${value.substring(0, 3)}) ${value.substring(3)}`;
                } else if (value.length <= 10) {
                    value = `(${value.substring(0, 3)}) ${value.substring(3, 6)}-${value.substring(6)}`;
                } else {
                    value = `(${value.substring(0, 3)}) ${value.substring(3, 6)}-${value.substring(6, 10)}`;
                }
        
                input.value = value;
            });
        </script>
            <script>
                function LoadMasiveImport() {
                  const element = document.querySelector('.sec-top');
                  if (element) {
                    element.classList.toggle('d-none');
                    element.classList.add('flip-up-ai')
                  }
                }




                function Load_Masive_Excel_Users() {
                    var formData = new FormData();
                    var fileInput = document.getElementById('file');
                
                    // Asegurarse de que se haya seleccionado un archivo
                    if (fileInput.files.length > 0) {
                        formData.append('file', fileInput.files[0]);  // Agregar el archivo al FormData
                
                        // Obtener el token CSRF
                        var csrfToken = document.querySelector('[name=csrfmiddlewaretoken]').value;
                
                        $.ajax({
                            url: '/company/upload-masive-user',
                            type: 'POST',
                            data: formData,
                            processData: false, // No procesar los datos
                            contentType: false, // No establecer tipo de contenido
                            headers: {
                                'X-CSRFToken': csrfToken, // Enviar el token CSRF con la solicitud
                            },
                            success: function(response) {
                                alert("Usuarios cargados exitosamente");
                            },
                            error: function(xhr, status, error) {
                                alert('Error al cargar el archivo');
                            }
                        });
                    }
                }
            </script>

            
    </body>
</html>